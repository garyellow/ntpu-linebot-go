# ==============================================================================
# Docker Compose Deployment (Bot Only)
# ==============================================================================

# ------------------------------------------------------------------------------
# Core Configuration (Required)
# ------------------------------------------------------------------------------
NTPU_LINE_CHANNEL_ACCESS_TOKEN=your_access_token_here
NTPU_LINE_CHANNEL_SECRET=your_channel_secret_here

# ------------------------------------------------------------------------------
# Server Configuration
# ------------------------------------------------------------------------------
#NTPU_LOG_LEVEL=info
#NTPU_PORT=10000
#NTPU_SHUTDOWN_TIMEOUT=30s
# Optional: override server name for log/Sentry (auto-detects NODE_NAME/K8S_NODE_NAME/KUBE_NODE_NAME/MY_NODE_NAME, then hostname)
#NTPU_SERVER_NAME=ntpu-linebot-go-01
# Optional: override instance id for log/metrics (auto-detects POD_UID/MY_POD_UID/POD_NAME/MY_POD_NAME/HOSTNAME, then server name)
#NTPU_INSTANCE_ID=ntpu-linebot-go-01-pod-abc123

# ------------------------------------------------------------------------------
# Data Configuration
# ------------------------------------------------------------------------------
# Cache TTL for contacts/courses/historical_courses/programs/course_programs/syllabi (default: 168h = 7 days)
#NTPU_CACHE_TTL=168h

# Database and cache storage directory
# Default: ./data (Windows), /data (Linux/Mac)
#NTPU_DATA_DIR=/data

# ------------------------------------------------------------------------------
# Scraper Configuration
# ------------------------------------------------------------------------------
#NTPU_SCRAPER_MAX_RETRIES=10
#NTPU_SCRAPER_TIMEOUT=60s

# ------------------------------------------------------------------------------
# Webhook Configuration
# ------------------------------------------------------------------------------
#NTPU_WEBHOOK_TIMEOUT=60s

# ------------------------------------------------------------------------------
# Rate Limit Configuration (Token Bucket Algorithm)
# ------------------------------------------------------------------------------
# Global rate limit across all users
#NTPU_GLOBAL_RATE_RPS=100

# Per-user webhook request limiting
#   Burst: 15 tokens (can send 15 requests instantly)
#   Refill: 0.1 tokens/sec (1 token per 10 seconds)
#NTPU_USER_RATE_BURST=15
#NTPU_USER_RATE_REFILL=0.1

# Per-user LLM API limiting (Multi-Layer: Hourly + Daily)
#   Burst: 60 tokens (maximum instant AI requests)
#   Refill: 30 tokens/hour
#   Daily: 180 requests/day (sliding window)
#NTPU_LLM_RATE_BURST=60
#NTPU_LLM_RATE_DAILY=180
#NTPU_LLM_RATE_REFILL=30

# ------------------------------------------------------------------------------
# Startup Configuration
# ------------------------------------------------------------------------------
# Wait for initial warmup before accepting webhook traffic
#   true: /webhook returns 503 until warmup completes or grace period timeout
#   false (default): /webhook accepts traffic immediately
#NTPU_WARMUP_WAIT=false

# Grace period for warmup readiness
# After this period, /readyz becomes ready even if warmup is still in progress
# When NTPU_WARMUP_WAIT=true, /webhook will also stop returning 503 after this period
#NTPU_WARMUP_GRACE_PERIOD=10m

# Maintenance refresh/cleanup task intervals
#NTPU_MAINTENANCE_REFRESH_INTERVAL=24h
#NTPU_MAINTENANCE_CLEANUP_INTERVAL=24h
# When R2 is disabled, schedule state is local to each instance

# ------------------------------------------------------------------------------
# LLM Configuration (Optional)
# Requires: NTPU_LLM_ENABLED=true + at least one API key
# ------------------------------------------------------------------------------
#NTPU_LLM_ENABLED=false
#NTPU_LLM_PROVIDERS=gemini,groq,cerebras,openai

# Gemini - https://aistudio.google.com/apikey
#NTPU_GEMINI_API_KEY=
#NTPU_GEMINI_INTENT_MODELS=gemini-2.5-flash,gemini-2.5-flash-lite
#NTPU_GEMINI_EXPANDER_MODELS=gemini-2.5-flash,gemini-2.5-flash-lite

# Groq - https://console.groq.com/keys
#NTPU_GROQ_API_KEY=
#NTPU_GROQ_INTENT_MODELS=meta-llama/llama-4-maverick-17b-128e-instruct,llama-3.3-70b-versatile
#NTPU_GROQ_EXPANDER_MODELS=meta-llama/llama-4-scout-17b-16e-instruct,llama-3.1-8b-instant

# Cerebras - https://cloud.cerebras.ai/
#NTPU_CEREBRAS_API_KEY=
#NTPU_CEREBRAS_INTENT_MODELS=llama-3.3-70b,llama-3.1-8b
#NTPU_CEREBRAS_EXPANDER_MODELS=llama-3.3-70b,llama-3.1-8b

# OpenAI-Compatible (requires both API key and endpoint)
#NTPU_OPENAI_API_KEY=
#NTPU_OPENAI_ENDPOINT=http://localhost:1234/v1/
#NTPU_OPENAI_INTENT_MODELS=your-model-name
#NTPU_OPENAI_EXPANDER_MODELS=your-model-name

# ------------------------------------------------------------------------------
# Better Stack Logging (Optional)
# ------------------------------------------------------------------------------
#NTPU_BETTERSTACK_ENABLED=false
#NTPU_BETTERSTACK_ENDPOINT=https://in.logs.betterstack.com
#NTPU_BETTERSTACK_TOKEN=your_betterstack_source_token_here

# ------------------------------------------------------------------------------
# Sentry Error Tracking (Optional)
# DSN format: https://$APPLICATION_TOKEN@$INGESTING_HOST/1
# ------------------------------------------------------------------------------
#NTPU_SENTRY_ENABLED=false
#NTPU_SENTRY_DSN=https://your_sentry_application_token_here@sentry.example.com/1
#NTPU_SENTRY_ENVIRONMENT=production
#NTPU_SENTRY_RELEASE=ntpu-linebot-go@1.0.0
#NTPU_SENTRY_SAMPLE_RATE=1.0
#NTPU_SENTRY_TRACES_SAMPLE_RATE=0.0

# ------------------------------------------------------------------------------
# Metrics Authentication (Optional)
# ------------------------------------------------------------------------------
#NTPU_METRICS_AUTH_ENABLED=false
#NTPU_METRICS_USERNAME=prometheus
#NTPU_METRICS_PASSWORD=your_secure_password_here

# ------------------------------------------------------------------------------
# R2 Snapshot Storage (Optional)
# ------------------------------------------------------------------------------
#NTPU_R2_ENABLED=false
#NTPU_R2_ACCOUNT_ID=your_cloudflare_account_id
#NTPU_R2_ACCESS_KEY_ID=your_r2_access_key_id
#NTPU_R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
#NTPU_R2_BUCKET_NAME=ntpu-linebot-snapshots
#NTPU_R2_SNAPSHOT_KEY=snapshots/cache.db.zst
#NTPU_R2_LOCK_KEY=locks/leader.json
#NTPU_R2_LOCK_TTL=1h
#NTPU_R2_SNAPSHOT_POLL_INTERVAL=15m
#NTPU_R2_DELTA_PREFIX=deltas
#NTPU_R2_SCHEDULE_KEY=schedules/maintenance.json

# ------------------------------------------------------------------------------
# Docker Compose Configuration
# ------------------------------------------------------------------------------
# Full Docker image name (including registry, repository, and tag)
# Override this to use a custom image or fork
#NTPU_DOCKER_IMAGE=garyellow/ntpu-linebot-go:latest
#NTPU_HOST_PORT=10000
